{%- case block.type -%}
  {%- when 'review_count' -%}
    <div class="review-blocks" {{ block.shopify_attributes }}>
      <span class="star-count">
        {% assign rating = block.settings.start %}
        {% for i in (1..rating) %}
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 0L11.1246 6.87539H18L12.4377 11.1246L14.5623 18L9 13.7508L3.43769 18L5.56231 11.1246L0 6.87539H6.87539L9 0Z" fill="black"/>
          </svg>
        {% endfor %}
      </span>
      <span class="review-text">{{ block.settings.text }}</span>
    </div>
  {%- when 'short_des' -%}
    <div class="short-des-wrapper" {{ block.shopify_attributes }}>
      <p class="short-des">{{ block.settings.short_des }}</p>
    </div>

  {%- when 'benifits_list' -%}
    <div class="benifits-list">
      <h3 class="benifits-list-title">{{ blocks.settings.title }}</h3>
      <ul class="benifits-list-item">
        {% for i in (1..10) %}
          {% assign setting_key = 'list_item_' | append: i %}
          {% assign setting_key_img = 'list_item_img_' | append: i %}
          {% if block.settings[setting_key] != blank %}
            <li>
              {% if block.settings[setting_key_img] != blank %}
                <img src="{{ block.settings[setting_key_img] | img_url: 'master' }}" alt="icon">
              {% endif %}
              <span>{{ block.settings[setting_key] }}</span>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>

  {%- when 'icon_text' -%}
    <div class="icon-row">
      {% for i in (1..3) %}
        {% assign icon_key = 'icon_' | append: i %}
        {% assign title_key = 'title_' | append: i %}

        {% if block.settings[title_key] != blank %}
          <div class="icon-item">
            {% if block.settings[icon_key] != blank %}
              <img
                src="{{ block.settings[icon_key] | img_url: 'master' }}"
                alt="{{ block.settings[title_key] }}"
                class="icon-img"
              >
            {% endif %}
            <p class="icon-title">{{ block.settings[title_key] }}</p>
          </div>
        {% endif %}
      {% endfor %}
    </div>

  {%- when 'video_testimonials' -%}
    <div class="testimonial-slider">
      <h3 class="testimonial-title">{{ block.settings.section_title }}</h3>
      <div class="swiper testimonial-swiper">
        <div class="swiper-wrapper">
          {% for i in (1..10) %}
            {% assign video_key = 'video_' | append: i %}
            {% assign text_key = 'text_' | append: i %}

            {% if block.settings[video_key] != blank %}
              <div class="swiper-slide testimonial-slide">
                <div class="testimonial-video">
                  <video controls playsinline preload="metadata">
                    <source src="{{ block.settings[video_key] }}" type="video/mp4">
                  </video>
                </div>
                {% if block.settings[text_key] != blank %}
                  <p class="testimonial-text">{{ block.settings[text_key] }}</p>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>

        <!-- Swiper Navigation -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
{% endcase %}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    var testimonialSwiper = new Swiper('.testimonial-swiper', {
      slidesPerView: 4,
      spaceBetween: 20,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      breakpoints: {
        320: { slidesPerView: 1 },
        640: { slidesPerView: 2 },
        1024: { slidesPerView: 3 },
        1280: { slidesPerView: 4 },
      },
    });
  });
</script>
