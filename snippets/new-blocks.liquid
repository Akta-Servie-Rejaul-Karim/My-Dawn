{%- case block.type -%}
  {%- when 'review_count' -%}
    <div class="review-blocks" {{ block.shopify_attributes }}>
      <span class="star-count">
        {% assign rating = block.settings.start %}
        {% for i in (1..rating) %}
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 0L11.1246 6.87539H18L12.4377 11.1246L14.5623 18L9 13.7508L3.43769 18L5.56231 11.1246L0 6.87539H6.87539L9 0Z" fill="black"/>
          </svg>
        {% endfor %}
      </span>
      <span class="review-text">{{ block.settings.text }}</span>
    </div>
  {%- when 'short_des' -%}
    <div class="short-des-wrapper" {{ block.shopify_attributes }}>
      <p class="short-des">{{ block.settings.short_des }}</p>
    </div>

  {%- when 'benifits_list' -%}
    <div class="benifits-list" {{ block.shopify_attributes }}>
      <h3 class="benifits-list-title">{{ block.settings.title }}</h3>
      <ul class="benifits-list-item">
        {% for i in (1..10) %}
          {% assign setting_key = 'list_item_' | append: i %}
          {% assign setting_key_img = 'list_item_img_' | append: i %}
          {% if block.settings[setting_key] != blank %}
            <li>
              {% if block.settings[setting_key_img] != blank %}
                <img src="{{ block.settings[setting_key_img] | img_url: 'master' }}" alt="icon">
              {% endif %}
              <span>{{ block.settings[setting_key] }}</span>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>

  {%- when 'icon_text' -%}
    <div class="icon-row" {{ block.shopify_attributes }}>
      {% for i in (1..3) %}
        {% assign icon_key = 'icon_' | append: i %}
        {% assign title_key = 'title_' | append: i %}

        {% if block.settings[title_key] != blank %}
          <div class="icon-item">
            {% if block.settings[icon_key] != blank %}
              <img
                src="{{ block.settings[icon_key] | img_url: 'master' }}"
                alt="{{ block.settings[title_key] }}"
                class="icon-img"
              >
            {% endif %}
            <p class="icon-title">{{ block.settings[title_key] }}</p>
          </div>
        {% endif %}
      {% endfor %}
    </div>

  {%- when 'video_testimonials' -%}
    {% render 'video-testimonials', block: block %}

  {%- when 'my_accordion' -%}
    {% render 'my-accordion', block: block %}
{% endcase %}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    var testimonialSwiper = new Swiper('.testimonial-swiper', {
      slidesPerView: 3,
      spaceBetween: 10,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      breakpoints: {
        320: { slidesPerView: 1 },
        640: { slidesPerView: 2 },
        1024: { slidesPerView: 3 },
      },
    });
    const playButtons = document.querySelectorAll('.video-play-btn');

    playButtons.forEach((btn) => {
      btn.addEventListener('click', function () {
        const video = this.previousElementSibling; // the video element
        if (video.paused) {
          video.play();
          this.style.display = 'none'; // hide play button when playing
        } else {
          video.pause();
          this.style.display = 'flex';
        }

        // Pause other videos when a new one plays
        document.querySelectorAll('.testimonial-video-wrapper video').forEach((v) => {
          if (v !== video) {
            v.pause();
            v.nextElementSibling.style.display = 'flex'; // show play button
          }
        });
      });
    });
  });
</script>
